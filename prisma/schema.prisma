generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider     = "postgresql"
  url          = env("DATABASE_URL")
}

model Cliente {
  id        String   @id @default(uuid())
  nome      String
  telefone  String?
  email     String?
  createdAt DateTime @default(now())

  // Um cliente pode ter vários agendamentos
  agendamentos Agendamento[]
}

model Agendamento {
  id          String   @id @default(uuid())
  data        DateTime
  
  // Mantemos clienteNome para histórico ou agendamentos rápidos sem cadastro
  clienteNome String   
  
  // Novo relacionamento (Opcional por enquanto)
  clienteId   String?
  cliente     Cliente? @relation(fields: [clienteId], references: [id])

  status      String   @default("pendente")
  observacoes String?
  createdAt   DateTime @default(now())

  servicos    Servico[] 
}

model Servico {
  id        String   @id @default(uuid())
  nome      String
  preco     Decimal
  duracao   Int
  descricao String?

  agendamentos Agendamento[]
}